schreibe ein script welches folgende variablen fÃ¼r folgende LÃ¤nder zusammenfÃ¼gt: Datenaggregation: monatlich (2014-2023) Country Stock_Index (Yahoo Finance) Norway Yahoo Finance â†’ ^OSEAX Canada Yahoo Finance â†’ ^GSPTSE South Korea Yahoo Finance â†’ ^KS11 (KOSPI) Mauritius Investing.com â†’ SEMDEX India Yahoo Finance â†’ ^NSEI (NIFTY 50) Colombia Yahoo Finance â†’ COLCAP Nigeria Investing.com â†’ NGX ASI Turkey Yahoo Finance â†’ XU100.IS Mauritius, colombia, und india werden einzeln in einer csv datei angefÃ¼gt spÃ¤ter. was sind die schritte?
Perfekt ğŸ‘ â€” das Ziel ist klar:
Du mÃ¶chtest die monatlichen Aktienindizes (2014â€“2023) aus Yahoo Finance + drei CSV-Dateien (Investing.com) zu einer gemeinsamen Datendatei zusammenfÃ¼hren.
Ich zeige dir erst die Arbeitsschritte, dann bekommst du ein sicheres, kommentiertes R-Skript.
________________________________________
ğŸ§­ Arbeitsschritte
1. Projektstruktur anlegen
Erstelle in RStudio einen klaren Projektordner:
BA_PVAR/
 â”œâ”€â”€ data_raw/        # Rohdaten (CSV, von Yahoo & Investing)
 â”œâ”€â”€ data_clean/      # bereinigte Daten (monatlich aggregiert)
 â”œâ”€â”€ scripts/         # R-Skripte
 â”œâ”€â”€ outputs/         # finale zusammengefÃ¼hrte Datei
 â””â”€â”€ plots/           # (spÃ¤ter fÃ¼r Visualisierungen)
Speichere deine drei CSV-Dateien dort ab:
data_raw/data_colcap.csv
data_raw/data_ngseindex.csv
data_raw/data_semdex.csv
________________________________________
2. R-Pakete installieren (einmalig)
Diese Pakete brauchst du:
install.packages(c("tidyverse", "quantmod", "lubridate", "readr"))
________________________________________
3. Yahoo-Daten herunterladen
Mit quantmod::getSymbols() holst du:
â€¢	Norwegen (^OSEAX)
â€¢	Kanada (^GSPTSE)
â€¢	SÃ¼dkorea (^KS11)
â€¢	Indien (^NSEI)
â€¢	TÃ¼rkei (^XU100.IS)
________________________________________
4. Daten monatlich aggregieren
Wir konvertieren tÃ¤gliche Daten zu Monatsdurchschnitten oder Monatsendwerten (je nach Methodik deiner Arbeit, i. d. R. Monatsende).
________________________________________
5. CSV-Dateien einlesen und vereinheitlichen
Die drei CSVs aus Investing.com haben unterschiedliche Spaltennamen â†’ wir bringen sie auf ein gemeinsames Format:
Date, Close, Country, Index.
________________________________________
6. Alle LÃ¤nder zusammenfÃ¼hren
Am Ende entsteht eine kombinierte Datei:
all_stock_indices_2014_2023.csv
________________________________________
ğŸ’» R-Skript: scripts/01_merge_stock_indices.R
# ---------------------------------------------------------
# Script: 01_merge_stock_indices.R
# Zweck:  Sammeln, Vereinheitlichen & ZusammenfÃ¼hren von Aktienindizes
# Zeitraum: 2014â€“2023, monatliche Daten
# ---------------------------------------------------------

# Pakete laden
library(quantmod)
library(tidyverse)
library(lubridate)
library(readr)

# Projektpfade --------------------------------------------------------------
raw_path <- "data_raw/"
clean_path <- "data_clean/"
output_path <- "outputs/"

# Yahoo Finance Indizes -----------------------------------------------------
symbols <- c(
  "OSEAX" = "^OSEAX",      # Norway
  "GSPTSE" = "^GSPTSE",    # Canada
  "KS11" = "^KS11",        # South Korea
  "NSEI" = "^NSEI",        # India
  "XU100.IS" = "XU100.IS"  # Turkey
)

getSymbols(Symbols = symbols, from = "2014-01-01", to = "2023-12-31")

# In Dataframe umwandeln und monatlich aggregieren --------------------------
make_monthly <- function(symbol, country_name) {
  df <- get(symbol)
  df_monthly <- to.monthly(df, indexAt = "lastof", OHLC = FALSE)
  df_tidy <- data.frame(
    Date = index(df_monthly),
    Close = as.numeric(df_monthly[, 1]),
    Country = country_name,
    Index = symbol
  )
  return(df_tidy)
}

# LÃ¤nder zuordnen
df_norway  <- make_monthly("OSEAX", "Norway")
df_canada  <- make_monthly("GSPTSE", "Canada")
df_korea   <- make_monthly("KS11", "South Korea")
df_india   <- make_monthly("NSEI", "India")
df_turkey  <- make_monthly("XU100.IS", "Turkey")

# Manuelle CSVs einlesen ----------------------------------------------------
read_manual_csv <- function(file, country, index_name) {
  read_csv(paste0(raw_path, file)) %>%
    rename(Date = 1, Close = 2) %>%    # anpassen je nach Spaltenstruktur
    mutate(
      Date = as.Date(Date),
      Country = country,
      Index = index_name
    )
}

df_colombia <- read_manual_csv("data_colcap.csv", "Colombia", "COLCAP")
df_mauritius <- read_manual_csv("data_semdex.csv", "Mauritius", "SEMDX")
df_nigeria <- read_manual_csv("data_ngseindex.csv", "Nigeria", "NGSEINDEX")

# Alles zusammenfÃ¼hren ------------------------------------------------------
all_indices <- bind_rows(
  df_norway, df_canada, df_korea, df_india, df_turkey,
  df_colombia, df_mauritius, df_nigeria
)

# Nach Datum sortieren
all_indices <- all_indices %>%
  arrange(Country, Date)

# Nur 2014â€“2023 behalten
all_indices <- all_indices %>%
  filter(Date >= "2014-01-01", Date <= "2023-12-31")

# Speichern -----------------------------------------------------------------
write_csv(all_indices, paste0(output_path, "all_stock_indices_2014_2023.csv"))

# Kurzer Check --------------------------------------------------------------
glimpse(all_indices)
summary(all_indices$Close)
________________________________________
âœ… Ergebnis
Du erhÃ¤ltst:
outputs/all_stock_indices_2014_2023.csv
mit den Spalten:
| Date | Close | Country | Index |
â†’ Damit hast du die monatlichen Aktienindizes aller 8 LÃ¤nder vereinheitlicht und kannst sie in der nÃ¤chsten Stufe (z. B. Log-Renditen berechnen, PVAR-Modell etc.) weiterverwenden.
________________________________________
MÃ¶chtest du, dass ich das Skript so erweitere, dass es gleich die monatlichen Renditen (log returns) mitberechnet und in einer zweiten Datei speichert (returns_stock_indices.csv)?
 
 
die csv dateien sehen aus wie im bild. 
Perfekt ğŸ‘ â€” danke fÃ¼r die Screenshots!
Ich sehe genau, was los ist:
________________________________________
ğŸ” Probleme & LÃ¶sungen
1. Fehlermeldung â€does not exist in current working directoryâ€œ
Das bedeutet:
â¡ï¸ R sucht die CSV-Dateien im falschen Ordner.
Du arbeitest gerade im Skript-Ordner
C:/Users/lena1/OneDrive/Dokumente/BA/scripts/
aber deine CSVs liegen vermutlich eine Ebene hÃ¶her oder woanders.
LÃ¶sung:
Lege sie in den Ordner:
C:/Users/lena1/OneDrive/Dokumente/BA/data_raw/
und Ã¼berprÃ¼fe, ob das so aussieht:
BA/
 â”œâ”€â”€ data_raw/
 â”‚     â”œâ”€â”€ data_colcap.csv
 â”‚     â”œâ”€â”€ data_ngseindex.csv
 â”‚     â”œâ”€â”€ data_semdex.csv
 â””â”€â”€ scripts/
       â””â”€â”€ 01_merge_stock_indices.R
Dann in RStudio oben im MenÃ¼:
Session â†’ Set Working Directory â†’ To Source File Location
(Damit arbeitet R ab sofort relativ zum Skriptverzeichnis.)
________________________________________
2. Spaltenstruktur der CSV-Dateien
Dein Screenshot zeigt:
| Date | Price | Open | High | Low | Vol. | Change % |
â¡ï¸ Also mÃ¼ssen wir die Spalte â€Priceâ€œ verwenden und nicht â€Closeâ€œ.
Hier ist der korrigierte CSV-Import:
# ---------------------------------------------------------
# Manuelle CSVs einlesen (Investing.com)
# ---------------------------------------------------------
read_manual_csv <- function(file, country, index_name) {
  read_csv(paste0(raw_path, file)) %>%
    rename(
      Date = Date,
      Close = Price
    ) %>%
    mutate(
      Date = dmy(Date),              # Datum im Format 01/01/2014
      Country = country,
      Index = index_name
    ) %>%
    select(Date, Close, Country, Index)
}

df_colombia <- read_manual_csv("data_colcap.csv", "Colombia", "COLCAP")
df_mauritius <- read_manual_csv("data_semdex.csv", "Mauritius", "SEMDX")
df_nigeria <- read_manual_csv("data_ngseindex.csv", "Nigeria", "NGSEINDEX")
ğŸ“˜ ErklÃ¤rung:
â€¢	dmy(Date) erkennt dein Datum im Format â€01/01/2014â€œ.
â€¢	rename(Close = Price) nutzt den richtigen Preis.
â€¢	select(...) sortiert die Spalten sauber.
________________________________________
3. Warnung â€missing values removed from dataâ€œ
Das ist kein Fehler, nur eine Info von to.period():
â†’ es entfernt NA-Zeilen beim Monatswechsel. Das ist normal.
________________________________________
âœ… NÃ¤chster Schritt
1.	Stelle sicher, dass der Ordner data_raw korrekt ist.
2.	Kopiere die obige Funktion ins Skript (sie ersetzt die alte Version).
3.	Speichere und fÃ¼hre das Skript erneut aus.
Dann sollte alles fehlerfrei durchlaufen und die Datei
outputs/all_stock_indices_2014_2023.csv erstellt werden.
________________________________________
MÃ¶chtest du, dass ich im nÃ¤chsten Schritt zeige, wie du monatliche log-Renditen aus dieser zusammengefÃ¼hrten Datei berechnest (damit du sie direkt fÃ¼r das PVAR-Modell nutzen kannst)?

